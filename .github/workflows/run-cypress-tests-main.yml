name: Trigger Cypress Tests on Main Branch

on:
  pull_request:
    branches:
      - main
  workflow_dispatch:

jobs:
  trigger-end-to-end-tests:
    uses: ./.github/workflows/run-cypress-tests.yml
    with:
      environment: 'production'
      grep: ''
      grepTags: '@essential'
    secrets:
      DOCKER_PAT: ${{ secrets.DOCKER_PAT }}
      CYPRESS_PASSWORD: ${{ secrets.CYPRESS_PASSWORD }}
      S3_ACCESS_KEY_ID: ${{ secrets.S3_ACCESS_KEY_ID }}
      S3_SECRET_ACCESS_KEY: ${{ secrets.S3_SECRET_ACCESS_KEY }}
